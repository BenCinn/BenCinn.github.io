import{sleep as b}from"./sleep-b92576d7.js";import{r as f}from"./index-701e56ad.js";import"./index-92e603ea.js";const m=(t,e)=>Math.floor(Math.random()*(e-t))+t,w=()=>{const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=t.length,r=m(0,e);return t[r]},g=(t,e)=>{const r=e/3;return t.map(()=>m(r,e-100))},D=async(t,e)=>{const r=typeof e.scramble=="number"?e.scramble:3e3;await new Promise(i=>{t.forEach(async({currentNode:a,text:s})=>{let o=s.split("");const L=g(o,r),c=Date.now();for(f(a,e.parentElement,n=>{n.classList.add("finished-typing")});Date.now()-c<r;){const n=m(0,o.length),h=L[n],u=o[n]===" ",l=()=>Date.now()-c;if((()=>l()>=h)()||u)if(!(o[n]===s[n]))o[n]=s[n];else continue;else o[n]=w();const d=o.join("");a.innerHTML=d;const T=d===s,p=e.scrambleSlowdown?Math.round(l()/100):1;if(await b(p),T){i();break}}a.innerHTML=s})}),e.dispatch("done")};export{D as mode};
